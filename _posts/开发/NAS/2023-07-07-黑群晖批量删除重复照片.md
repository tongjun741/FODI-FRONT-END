---
tags:
    - NAS
---

前提：原来备份手机照片是定期备份，产生很多重复的照片文件。现在这些照片存储在NAS中，利用黑群晖人脸识别整理照片，发现重复照片需要批量删除。

方法：1、利用群晖自带的“存储空间分析器”来查找重复的文件，利用MD5来判断重复文件是否是真的重复，生成列表（度娘会告诉你详细方法）
2、利用计划任务或着ssh登录群晖，利用脚本命令批量删除重复文件。

重点是注意事项！！！！！！
1、每次最多只能查找5000个重复文件。
2、执行命令：

```
cat /volume1/photo/重复文件.txt| tr -d '\r' | xargs -I {} rm -rf  "{}"
```



3、重复文件.txt 这个文件不要用文本编辑器生成，会用回车作为换行标志。xargs命令使用null作为换行标志的。很多人因此没有成功删除重复文件，不是命令不对，而是因为列表文件不对
我的做法是，excle筛选出要删除的文件列表（具体问度娘），复制后，粘贴到sublime text里，保存为“重复文件.txt“，这样上传nas后命令就可以识别了。
这里是重点！这里是重点！这里是重点！



https://www.right.com.cn/forum/thread-8233476-1-1.html